importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.6.2/workbox-sw.js");const CACHE_NAME="story-cache-v2";workbox?(console.log("Workbox berhasil dimuat"),workbox.precaching.precacheAndRoute([{url:"/",revision:null},{url:"/index.html",revision:null},{url:"/main.js",revision:null},{url:"/assets/styles/style.css",revision:null},{url:"/manifest.json",revision:null},{url:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",revision:null},{url:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",revision:null}]),workbox.routing.registerRoute((({request:o})=>"image"===o.destination),new workbox.strategies.CacheFirst({cacheName:"story-images",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:604800})]})),workbox.routing.registerRoute((({url:o})=>"https://story-api.dicoding.dev"===o.origin),new workbox.strategies.NetworkFirst({cacheName:"story-api-cache",networkTimeoutSeconds:5,plugins:[new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]})]})),self.addEventListener("push",(o=>{let e={};try{o.data&&(e=o.data.json())}catch(o){console.error("Push event data is not JSON:",o)}const t=e.title||"Story Notification",i={body:e.body||"Ada story baru!",icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png",data:{url:e.url||"/"}};o.waitUntil(self.registration.showNotification(t,i))})),self.addEventListener("notificationclick",(o=>{o.notification.close(),o.waitUntil(clients.openWindow(o.notification.data?.url||"/"))}))):console.log("Workbox gagal dimuat");